<template><div><ul>
<li><a href="#nodejs">nodejs</a></li>
<li><a href="#bash">bash</a></li>
</ul>
<h3 id="nodejs" tabindex="-1"><a class="header-anchor" href="#nodejs"><span>nodejs</span></a></h3>
<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre v-pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> execSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'child_process'</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> commitTitle<span class="token punctuation">]</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>argv</span>
<span class="line">  <span class="token keyword">const</span> commands <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">'git add .'</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">git commit -m "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>commitTitle <span class="token operator">||</span> <span class="token string">'commit '</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">'git pull'</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">'git push'</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line">  <span class="token function">execSync</span><span class="token punctuation">(</span>commands<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' &amp;&amp; '</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">stdio</span><span class="token operator">:</span> <span class="token string">'inherit'</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error: '</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="bash" tabindex="-1"><a class="header-anchor" href="#bash"><span>bash</span></a></h3>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code><span class="line"><span class="token shebang important">#!/bin/bash</span></span>
<span class="line"><span class="token comment"># ä¿ç•™æ‰€æœ‰ Git å‘½ä»¤çš„è¾“å‡ºï¼ˆstdout å’Œ stderrï¼‰</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># è·å–æäº¤æ ‡é¢˜ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰</span></span>
<span class="line"><span class="token assign-left variable">commit_title</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$1</span>"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># è®¾ç½®é»˜è®¤æäº¤ä¿¡æ¯ï¼ˆå¦‚æœæœªæä¾›æ ‡é¢˜ï¼‰</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$commit_title</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span>
<span class="line">  <span class="token assign-left variable">commit_title</span><span class="token operator">=</span><span class="token string">"commit: <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token variable">)</span></span>"</span></span>
<span class="line"><span class="token keyword">fi</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å®šä¹‰è¦æ‰§è¡Œçš„ Git å‘½ä»¤åºåˆ—ï¼ˆç”¨ &amp;&amp; è¿æ¥ï¼Œä»»æ„ä¸€æ­¥å¤±è´¥åˆ™ç»ˆæ­¢ï¼‰</span></span>
<span class="line"><span class="token assign-left variable">commands</span><span class="token operator">=</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">'git config user.name'</span>                <span class="token comment"># è·å–/è®¾ç½®ç”¨æˆ·åï¼ˆç»§æ‰¿è¾“å‡ºï¼‰</span></span>
<span class="line">  <span class="token string">'git config user.email'</span>               <span class="token comment"># è·å–/è®¾ç½®é‚®ç®±ï¼ˆç»§æ‰¿è¾“å‡ºï¼‰</span></span>
<span class="line">  <span class="token string">'git add .'</span>                           <span class="token comment"># æš‚å­˜æ‰€æœ‰å˜æ›´ï¼ˆç»§æ‰¿è¾“å‡ºï¼‰</span></span>
<span class="line">  <span class="token string">"git commit -m <span class="token entity" title="\&quot;">\"</span><span class="token variable">$commit_title</span><span class="token entity" title="\&quot;">\"</span>"</span>     <span class="token comment"># åˆ›å»ºæäº¤ï¼ˆç»§æ‰¿è¾“å‡ºï¼‰</span></span>
<span class="line">  <span class="token string">'git pull'</span>                            <span class="token comment"># æ‹‰å–è¿œç¨‹æ›´æ–°ï¼ˆç»§æ‰¿è¾“å‡ºï¼‰</span></span>
<span class="line">  <span class="token string">'git push'</span>                            <span class="token comment"># æ¨é€æœ¬åœ°æäº¤ï¼ˆç»§æ‰¿è¾“å‡ºï¼‰</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ‰§è¡Œå‘½ä»¤åºåˆ—ï¼ˆstdio ç»§æ‰¿çˆ¶è¿›ç¨‹ï¼Œä¿ç•™æ‰€æœ‰è¾“å‡ºï¼‰</span></span>
<span class="line"><span class="token function-name function">try</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token builtin class-name">local</span> cmd</span>
<span class="line">  <span class="token keyword">for</span> <span class="token for-or-select variable">cmd</span> <span class="token keyword">in</span> <span class="token string">"<span class="token variable">${commands<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>"</span><span class="token punctuation">;</span> <span class="token keyword">do</span></span>
<span class="line">    <span class="token builtin class-name">echo</span> <span class="token string">"ğŸš€ æ‰§è¡Œå‘½ä»¤: <span class="token variable">$cmd</span>"</span>  <span class="token comment"># å¯é€‰ï¼šæç¤ºå½“å‰æ‰§è¡Œçš„å‘½ä»¤ï¼ˆéå¿…é¡»ï¼‰</span></span>
<span class="line">    <span class="token builtin class-name">eval</span> <span class="token string">"<span class="token variable">$cmd</span>"</span> <span class="token operator">||</span> <span class="token builtin class-name">return</span> <span class="token number">1</span>   <span class="token comment"># ä»»æ„å‘½ä»¤å¤±è´¥åˆ™ç»ˆæ­¢å¹¶è¿”å›é”™è¯¯</span></span>
<span class="line">  <span class="token keyword">done</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ•è·æ‰§è¡Œç»“æœ</span></span>
<span class="line"><span class="token keyword">if</span> try<span class="token punctuation">;</span> <span class="token keyword">then</span></span>
<span class="line">  <span class="token builtin class-name">echo</span> <span class="token string">"âœ… æ‰€æœ‰æ“ä½œæˆåŠŸå®Œæˆï¼"</span></span>
<span class="line"><span class="token keyword">else</span></span>
<span class="line">  <span class="token builtin class-name">echo</span> <span class="token string">"âŒ æ“ä½œå¤±è´¥ï¼ˆå…·ä½“é”™è¯¯å·²åœ¨ä¸Šæ–¹è¾“å‡ºï¼‰"</span> <span class="token operator">></span><span class="token file-descriptor important">&amp;2</span></span>
<span class="line">  <span class="token builtin class-name">exit</span> <span class="token number">1</span></span>
<span class="line"><span class="token keyword">fi</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>



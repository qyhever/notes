import comp from "/Users/await/pros/notes/docs/.vuepress/.temp/pages/posts/file/native-nodejs-download-file.html.vue"
const data = JSON.parse("{\"path\":\"/posts/file/native-nodejs-download-file.html\",\"title\":\"\",\"lang\":\"zh-CN\",\"frontmatter\":{},\"headers\":[{\"level\":2,\"title\":\"原生 nodejs 下载\",\"slug\":\"原生-nodejs-下载\",\"link\":\"#原生-nodejs-下载\",\"children\":[{\"level\":3,\"title\":\"预览\",\"slug\":\"预览\",\"link\":\"#预览\",\"children\":[]},{\"level\":3,\"title\":\"下载\",\"slug\":\"下载\",\"link\":\"#下载\",\"children\":[]}]}],\"git\":{},\"filePathRelative\":\"posts/file/native-nodejs-download-file.md\",\"excerpt\":\"<ul>\\n<li><a href=\\\"#%E5%8E%9F%E7%94%9F-nodejs-%E4%B8%8B%E8%BD%BD\\\">原生 nodejs 下载</a>\\n<ul>\\n<li><a href=\\\"#%E9%A2%84%E8%A7%88\\\">预览</a></li>\\n<li><a href=\\\"#%E4%B8%8B%E8%BD%BD\\\">下载</a></li>\\n</ul>\\n</li>\\n</ul>\\n<h2>原生 nodejs 下载</h2>\\n<div class=\\\"language-javascript line-numbers-mode\\\" data-highlighter=\\\"prismjs\\\" data-ext=\\\"js\\\"><pre><code><span class=\\\"line\\\"><span class=\\\"token keyword\\\">const</span> http <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'http'</span><span class=\\\"token punctuation\\\">)</span></span>\\n<span class=\\\"line\\\"><span class=\\\"token keyword\\\">const</span> fs <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'fs'</span><span class=\\\"token punctuation\\\">)</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\">http<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createServer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">req<span class=\\\"token punctuation\\\">,</span> res</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=&gt;</span> <span class=\\\"token punctuation\\\">{</span></span>\\n<span class=\\\"line\\\">  <span class=\\\"token comment\\\">// 设置下载文件名</span></span>\\n<span class=\\\"line\\\">  res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setHeader</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Content-Disposition'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'attachment; filename=\\\"l.png\\\"'</span><span class=\\\"token punctuation\\\">)</span></span>\\n<span class=\\\"line\\\">  <span class=\\\"token comment\\\">// 设置响应头，告诉客户端这是一个文件下载</span></span>\\n<span class=\\\"line\\\">  <span class=\\\"token comment\\\">// application/octet-stream 表示这是一个二进制流文件。浏览器遇到这种类型时，会将其视为二进制文件并触发下载行为</span></span>\\n<span class=\\\"line\\\">  <span class=\\\"token comment\\\">// res.setHeader('Content-Type', 'application/octet-stream')</span></span>\\n<span class=\\\"line\\\">  <span class=\\\"token comment\\\">// res.setHeader('Content-Type', 'image/png')</span></span>\\n<span class=\\\"line\\\">  <span class=\\\"token comment\\\">// 方式一：读取文件直接返回</span></span>\\n<span class=\\\"line\\\">  fs<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">readFile</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./logo.png'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">err<span class=\\\"token punctuation\\\">,</span> data</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=&gt;</span> <span class=\\\"token punctuation\\\">{</span></span>\\n<span class=\\\"line\\\">    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span></span>\\n<span class=\\\"line\\\">      res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">end</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'error'</span><span class=\\\"token punctuation\\\">)</span></span>\\n<span class=\\\"line\\\">    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span></span>\\n<span class=\\\"line\\\">      res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">end</span><span class=\\\"token punctuation\\\">(</span>data<span class=\\\"token punctuation\\\">)</span></span>\\n<span class=\\\"line\\\">    <span class=\\\"token punctuation\\\">}</span></span>\\n<span class=\\\"line\\\">  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span></span>\\n<span class=\\\"line\\\">  <span class=\\\"token comment\\\">// // 方式二：文件流式传输</span></span>\\n<span class=\\\"line\\\">  <span class=\\\"token comment\\\">// const fileStream = fs.createReadStream('./logo.png')</span></span>\\n<span class=\\\"line\\\">  <span class=\\\"token comment\\\">// // 将文件流管道到响应对象，实现自动传输</span></span>\\n<span class=\\\"line\\\">  <span class=\\\"token comment\\\">// fileStream.pipe(res)</span></span>\\n<span class=\\\"line\\\"><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">listen</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">4000</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=&gt;</span> <span class=\\\"token punctuation\\\">{</span></span>\\n<span class=\\\"line\\\">\\tconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'running...'</span><span class=\\\"token punctuation\\\">)</span></span>\\n<span class=\\\"line\\\"><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span></span>\\n<span class=\\\"line\\\"></span></code></pre>\\n<div class=\\\"line-numbers\\\" aria-hidden=\\\"true\\\" style=\\\"counter-reset:line-number 0\\\"><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div></div></div>\"}")
export { comp, data }

if (import.meta.webpackHot) {
  import.meta.webpackHot.accept()
  if (__VUE_HMR_RUNTIME__.updatePageData) {
    __VUE_HMR_RUNTIME__.updatePageData(data)
  }
}

if (import.meta.hot) {
  import.meta.hot.accept(({ data }) => {
    __VUE_HMR_RUNTIME__.updatePageData(data)
  })
}
